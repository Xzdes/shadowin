# Shadowin AI-Render Engine

**Shadowin** — это не просто приложение. Это прототип и доказательство концепции **процедурно-генерируемого UI-фреймворка**, в котором визуальное представление интерфейса создается нейронной сетью в реальном времени.

Это эксперимент, который отвечает на вопрос: "Что, если вместо того чтобы рисовать кнопки, мы будем их *описывать* и позволим искусственному интеллекту быть нашим художником?"

## Фундаментальная Идея

В традиционных UI-фреймворках логика и визуал тесно связаны. Разработчик определяет не только *что* делает кнопка, но и *как* она выглядит: ее цвет, форму, шрифт.

**Shadowin переворачивает эту парадигму.**

1.  **"Скелет" (Логика на Rust):** Наш код отвечает только за "физику" и структуру интерфейса. Он знает, что "здесь находится кнопка", "ее размер 200x60", "сейчас на нее наведен курсор", и "при клике нужно выполнить это действие". Он не имеет ни малейшего понятия о том, как эта кнопка выглядит.

2.  **"Кожа" (Визуал от AI):** Внешний вид генерируется **нейронной сетью** (локально запущенной Stable Diffusion) на основе текстового описания (промпта), которое формирует "скелет". Вместо того чтобы рисовать синий прямоугольник, наш код отправляет AI-художнику задание:
    > `"Нарисуй четкую UI-кнопку с текстом 'Submit' в стиле темного киберпанка с неоновыми бликами, состояние - наведение курсора"`

В результате мы получаем интерфейс, который является не статичным набором виджетов, а **живой, динамической и бесконечно кастомизируемой сущностью.**

## Ключевые Особенности

*   **AI-Driven Rendering:** Визуальное представление всех элементов интерфейса генерируется нейросетью Stable Diffusion.
*   **Декларативный Дизайн:** Мы описываем, *что* мы хотим видеть, а не *как* это рисовать. Это позволяет менять весь облик приложения, просто изменив текстовый промпт.
*   **Полный Контроль:** Приложение написано на чистом Rust и самостоятельно отрисовывает каждый пиксель, что дает абсолютную свободу в реализации любых, даже самых безумных идей.
*   **Кэширование Рендеров:** Сгенерированные изображения кэшируются для обеспечения плавной работы интерфейса после первоначальной "прогрузки".
*   **Самодостаточность:** Для работы требуется только запущенный локальный сервер Stable Diffusion с включенным API. Вся остальная логика инкапсулирована в приложении.
*   **Модульная Архитектура:** Четкое разделение на:
    *   **`main.rs`:** Управление окном, состоянием и циклом событий.
    *   **`ai_renderer.rs`:** "Переводчик", отвечающий за общение с API нейросети.
    *   **`ui/mod.rs`:** UI-менеджер, который управляет всеми виджетами и кэшем.
    *   **`ui/widgets.rs`:** "Чертежи" наших виджетов, которые знают, как формировать промпты для AI.

## Как это работает

1.  При запуске `Ui`-менеджер определяет, какие визуальные состояния нужны для каждого виджета (например, `button-0-Idle`, `button-0-Hovered`).
2.  Он проверяет, есть ли в кэше готовые изображения для этих состояний.
3.  Если изображения нет (`Cache miss`), он формирует текстовый промпт и отправляет его через `ai_renderer` на локальный сервер Stable Diffusion.
4.  Приложение ожидает, пока нейросеть сгенерирует и вернет картинку.
5.  Полученная картинка сохраняется в кэш.
6.  В цикле отрисовки метод `draw` каждого виджета просто берет из кэша нужную картинку (соответствующую его текущему состоянию) и "впечатывает" ее пиксели на экран.

## Требования для Запуска

1.  **Rust:** Установленная среда разработки Rust.
2.  **Шрифт:** Наличие файла `font.ttf` в папке `assets` в корне проекта.
3.  **Stable Diffusion:** Локально установленный и запущенный **`stable-diffusion-webui` (by AUTOMATIC1111)**.
    *   **Версия Python:** 3.10.6.
    *   **Модель:** Любая модель Stable Diffusion v1.5 (например, `v1-5-pruned-emaonly.safetensors`).
    *   **Режим Запуска:** Сервер должен быть запущен с аргументом `--api`.

## Запуск Проекта

1.  Убедитесь, что сервер `stable-diffusion-webui` запущен и работает.
2.  В терминале, в корневой директории проекта, выполните команду:
    ```bash
    cargo run
    ```
3.  **Будьте терпеливы!** При первом запуске приложение будет генерировать и кэшировать все необходимые изображения. Этот процесс может занять несколько минут. Следите за логами в консоли. Как только все изображения будут сгенерированы, появится окно приложения.

## Будущее Проекта

Этот прототип — лишь вершина айсберга. Возможности этой технологии безграничны:
*   **Темы, управляемые текстом:** Пользователь сможет сам вводить промпты для кастомизации интерфейса.
*   **Адаптивный UI:** Интерфейс, который меняет свой внешний вид в зависимости от контекста или действий пользователя.
*   **Интеграция с более продвинутыми моделями:** Использование моделей, которые лучше справляются с рендерингом текста.

**Shadowin — это взгляд в будущее, где интерфейсы перестают быть статичными и становятся произведениями искусства, созданными в сотрудничестве человека и машины.**