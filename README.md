# Shadowin AI-Render Engine

**Shadowin** — это не просто приложение. Это продвинутый прототип **процедурно-генерируемого UI-фреймворка**, в котором визуальное представление интерфейса создается нейронной сетью в реальном времени, а затем "оживляется" с помощью нативного кода.

Это эксперимент, который отвечает на вопрос: "Что, если вместо того чтобы рисовать кнопки, мы будем их *описывать* и позволим искусственному интеллекту быть нашим художником, а нативному коду — нашим аниматором?"

## Фундаментальная Идея

В традиционных UI-фреймворках логика и визуал тесно связаны. Разработчик определяет не только *что* делает кнопка, но и *как* она выглядит: ее цвет, форму, шрифт.

**Shadowin переворачивает эту парадигму.**

1.  **"Скелет" (Логика на Rust):** Наш код отвечает только за "физику" и структуру интерфейса. Он знает, что "здесь находится кнопка", "ее размер 200x60", "сейчас на нее наведен курсор", и "при клике нужно выполнить это действие".

2.  **"Кожа" (Визуал от AI):** Внешний вид *фонов* для элементов генерируется **нейронной сетью** (локально запущенной Stable Diffusion) на основе текстового описания (промпта). Вместо того чтобы рисовать синий прямоугольник, наш код отправляет AI-художнику задание:
    > `"Нарисуй фон для четкой UI-кнопки в стиле темного киберпанка с неоновыми бликами, состояние - наведение курсора"`

3.  **"Душа" (Нативный рендеринг):** Поверх сгенерированных AI фонов Rust накладывает финальные штрихи: идеально четкий, **адаптивно-контрастный текст** и плавные **псевдо-анимации** переходов между состояниями.

В результате мы получаем интерфейс, который является не статичным набором виджетов, а **живой, динамической и бесконечно кастомизируемой сущностью.**

## Ключевые Особенности

*   **Гибридный AI-Рендеринг:** Визуальный стиль фонов генерируется Stable Diffusion, а критически важные элементы (текст, иконки) накладываются нативно, обеспечивая и уникальность, и читабельность.
*   **"Экран Бытия" (Genesis Screen):** Проблема "холодного старта" превращена в фичу. При первом запуске приложение показывает нативный экран загрузки, который визуализирует процесс генерации и кэширования ассетов.
*   **Адаптивный Контрастный Текст:** Фреймворк автоматически анализирует сгенерированный фон и подбирает для текста цвет (светлый или темный), чтобы он всегда оставался идеально читаемым.
*   **Псевдо-Анимации Переходов:** Смена состояний (например, при наведении курсора) происходит не мгновенно, а через плавный эффект затухания (cross-fade), что делает интерфейс живым и отзывчивым.
*   **Декларативный Дизайн:** Мы описываем, *что* мы хотим видеть, а не *как* это рисовать. Это позволяет менять весь облик приложения, просто изменив текстовый промпт.
*   **Персистентное Кэширование:** Сгенерированные изображения сохраняются на диск. Последующие запуски приложения происходят мгновенно.

## Как это работает

1.  **Первый запуск:** Приложение стартует и отображает **"Экран Бытия"**.
2.  Оно определяет, какие визуальные состояния нужны для каждого виджета (например, `button-0-Idle-background`, `button-0-Hovered-background`).
3.  Оно проверяет, есть ли в папке `cache` на диске готовые изображения для этих состояний.
4.  **Cache miss:** Если изображения нет, оно формирует текстовый промпт и отправляет его через `ai_renderer` на локальный сервер Stable Diffusion. "Экран Бытия" информирует пользователя об этом процессе.
5.  **Кэширование:** Полученная картинка сохраняется в папку `cache` и в оперативную память.
6.  **Запуск UI:** Как только все необходимые ассеты сгенерированы или загружены из кэша, запускается основной интерфейс.
7.  **Отрисовка:** В цикле отрисовки метод `draw` каждого виджета:
    *   Берет из кэша нужный фон (или два фона для анимации).
    *   Рисует фон с эффектом перехода.
    *   Анализирует фон и накладывает поверх него контрастный текст.

## Требования для Запуска

1.  **Rust:** Установленная среда разработки Rust.
2.  **Шрифт:** Наличие файла `font.ttf` в папке `assets` в корне проекта.
3.  **Stable Diffusion:** Локально установленный и запущенный **`stable-diffusion-webui` (by AUTOMATIC1111)**.
    *   **Версия Python:** 3.10.6.
    *   **Модель:** Любая модель Stable Diffusion v1.5 (например, `v1-5-pruned-emaonly.safetensors`).
    *   **Режим Запуска:** Сервер должен быть запущен с аргументом `--api`.

## Запуск Проекта

1.  Убедитесь, что сервер `stable-diffusion-webui` запущен и работает.
2.  В терминале, в корневой директории проекта, выполните команду:
    ```bash
    cargo run
    ```
3.  **Наблюдайте за магией!** При первом запуске появится "Экран Бытия", и приложение начнет генерировать и кэшировать все необходимые изображения. Этот процесс может занять несколько минут. Следите за логами в консоли. Как только все будет готово, появится окно приложения.
4.  Все последующие запуски будут практически мгновенными.

## Будущее Проекта

Этот прототип — лишь вершина айсберга. Возможности этой технологии безграничны:
*   **Темы, управляемые пользователем:** Дать пользователю возможность самому вводить главный промпт для кастомизации всего интерфейса "на лету".
*   **Продвинутая система макетов:** Реализовать полноценную систему компоновки (`Column`, `Row`, `Grid`), чтобы уйти от жесткого кодирования координат.
*   **Генерация UI через LLM:** Интеграция с большими языковыми моделями (GPT, Llama), которые по запросу "создай экран входа в игру про космос" будут сами генерировать текстовые промпты для Shadowin.
*   **Более сложные псевдо-анимации:** Использование AI для генерации не просто состояний, а небольших спрайт-листов для создания эффектов (например, свечение, искры).

**Shadowin — это взгляд в будущее, где интерфейсы перестают быть статичными и становятся произведениями искусства, созданными в сотрудничестве человека и машины.**